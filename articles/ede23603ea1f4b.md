---
title: "pandas DataFrameで、条件に合う行の前後を取りたいとき"
emoji: "🚀"
type: "tech"
topics:
  - "python"
  - "pandas"
  - "データ分析"
  - "finance"
published: true
published_at: "2023-12-30 12:24"
---

金融時系列データを使用しているときによくあるのが、収益率の異常値を見つけて、その前後の価格を確認したいとき。

まずは条件に合う列を抜き出すが、前後が取れない。
```python
df[df["ret"]>100]
```
そこで、indexに変換してから一つ足し引きしてやる

```python
indices = df[df["ret"]>100].index
df.loc[indices-1,:]
```
